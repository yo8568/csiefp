(function(c){c.extend({tablesorterFilter:new function(){function m(b){if(b.config.debug)var h=new Date;for(var a=[],e=[],f=0;f<b.config.filter.length;f++){var d=b.config.filter[f],i=c(d.filterContainer);e[f]=d.filterColumns;i=jQuery.trim(i.val()).replace(/\s+/g," ");if(0!=i.length){var j=/^([a-z]+):(.+)/.exec(i);if(null!==j)for(var l=j[1],i=j[2],j=0;j<d.columns.length;j++)if(0===d.columns[j].indexOf(l)){d.filterColumns=[j];break}l=d.filterCaseSensitive;a.push({caseSensitive:l,words:l?i.split(" "):
i.toLowerCase().split(" "),findStr:d.filterColumns?"td:eq("+d.filterColumns.join("),td:eq(")+")":"",filterFunction:d.filterFunction})}d.filterColumns=e[f]}for(var k=a.length,e=0==k?function(){var a=jQuery(this);g[g.length]=a}:function(){for(var c=jQuery(this),b=0;b<k;b++)if(!a[b].filterFunction((a[b].findStr?c.find(a[b].findStr):c).text(),a[b].words,a[b].caseSensitive))return!0;g[g.length]=c},d=b.config.cache.row,g=[],i=d.length,f=0;f<i;f++)d[f].each(e);c.tablesorter.clearTableBody(b);e=g.length;
for(f=0;f<e;f++)c(b.tBodies[0]).append(g[f]);c(b).trigger("update");g.length&&(c(b).trigger("appendCache"),c(b).trigger("sorton",[b.config.sortList]));b.config.debug&&c.tablesorter.benchmark("Apply filter:",h);c(b).trigger("filterEnd");return b}this.defaults={filterContainer:"#filter-box",filterClearContainer:"#filter-clear-button",filterColumns:null,filterCaseSensitive:!1,filterWaitTime:500,filterFunction:function(b,c,a){b=a?b:b.toLowerCase();for(a=0;a<c.length;a++)if("-"==c[a].charAt(0)){if(-1!=
b.indexOf(c[a].substr(1)))return!1}else if(-1==b.indexOf(c[a]))return!1;return!0},columns:[]};this.construct=function(){var b=arguments;return this.each(function(){this.config.filter=Array(b.length);var h=this.config;h.filter=Array(b.length);for(var a=0;a<b.length;a++)h.filter[a]=c.extend(this.config.filter[a],c.tablesorterFilter.defaults,b[a]);for(var e=this,f=Array(b.length),a=0;a<b.length;a++){var d=c(h.filter[a].filterContainer);if(d.length)d[0].filterIndex=a;d.keyup(function(b,a){var d=this.filterIndex;
void 0!==a&&c(this).val(a);var k=this;if(13==k.keyCode||void 0!==a)var g=1,n=!0;else g=h.filter[d].filterWaitTime||500,n=!1;clearTimeout(f[d]);f[d]=setTimeout(function(){var c=k.value;if(c!=k.lastValue||n)k.lastValue=c,m(e)},g);return!1});if(h.filter[a].filterClearContainer&&(d=c(h.filter[a].filterClearContainer),d.length))d[0].filterIndex=a,d.click(function(){var b=c(h.filter[this.filterIndex].filterContainer);b.val("");b[0].lastValue="";m(e);"hidden"!=b[0].type&&b.focus()})}c(e).bind("doFilter",
function(){m(e)});c(e).bind("clearFilter",function(){if(e.config.debug)var b=new Date;for(var a=0;a<e.config.filter.length;a++)c(e.config.filter[a].filterContainer).val("").get(0).lastValue="";var d=e.config.cache.row;c.tablesorter.clearTableBody(e);for(a=0;a<d.length;a++)c(e.tBodies[0]).append(d[a]);c(e).trigger("update");c(e).trigger("appendCache");c(e).trigger("sorton",[e.config.sortList]);e.config.debug&&c.tablesorter.benchmark("Clear filter:",b);c(e).trigger("filterCleared")})})}}});c.fn.extend({tablesorterFilter:c.tablesorterFilter.construct})})(jQuery);
